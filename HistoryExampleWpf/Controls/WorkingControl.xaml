<UserControl x:Class="HistoryExampleWpf.Controls.WorkingControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="clr-namespace:HistoryExampleWpf.Controls"
             xmlns:historyExample="clr-namespace:HistoryExampleWpf" mc:Ignorable="d" d:DesignHeight="450"
             d:DesignWidth="800">
    <Grid>
        <Viewbox Stretch="Uniform">
            <Grid DataContext="{Binding Working, Source= {x:Static historyExample:App.ViewModel}}">
                <Canvas Background="White" Height="180" Width="270">
                    <controls:QArrow Canvas.Left="70" Canvas.Top="0" X1="0" Y1="20" X2="45" Y2="4" X3="90" Y3="20" />
                    <controls:InitialState Canvas.Left="60" Canvas.Top="10" Width="20" Height="20"
                                           CurrentState="{Binding CurrentState}" />
                    <controls:State Canvas.Left="160" Canvas.Top="10" CurrentState="{Binding CurrentState}"
                                    Id="L2-Initializing" DisplayName="L2-Initializing" />
                    <controls:QArrow Canvas.Left="80" Canvas.Top="40" X1="80" Y1="0" X2="10" Y2="0" X3="0" Y3="30" />
                    <controls:State Canvas.Left="10" Canvas.Top="70" CurrentState="{Binding CurrentState}"
                                    Id="L2-Preparing" DisplayName="L2-Preparing" IsComposite="True" />
                    <controls:QArrow Canvas.Left="110" Canvas.Top="90" X1="0" Y1="0" X2="60" Y2="0" X3="90" Y3="40" />
                    <controls:State Canvas.Left="160" Canvas.Top="130" CurrentState="{Binding CurrentState}"
                                    Id="L2-Working" DisplayName="L2-Working" IsComposite="True" />
                    <controls:QArrow Canvas.Left="100" Canvas.Top="150" X1="60" Y1="0" X2="30" Y2="0" X3="0" Y3="10" />
                    <controls:FinalState Canvas.Left="81" Canvas.Top="151" Width="20" Height="20"
                                         CurrentState="{Binding CurrentState}" />
                    <TextBlock Canvas.Left="120" Canvas.Top="27" Text="N" />
                </Canvas>
                <Rectangle Fill="LightGray" Opacity="0.6"
                           Visibility="{Binding IsInactive, Converter={StaticResource B2VConverter}}" />
            </Grid>
        </Viewbox>
    </Grid>
</UserControl>